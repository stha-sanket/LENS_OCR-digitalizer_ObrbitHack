import PyPDF2
import requests

# Function to extract text from the PDF file
def extract_text_from_pdf(pdf_path):
    with open(pdf_path, "rb") as file:
        reader = PyPDF2.PdfReader(file)
        text = ""
        for page in reader.pages:
            text += page.extract_text()
    return text

# Function to convert extracted text to speech
def text_to_speech(text):
    # URL of the ResponsiveVoice API
    url = "https://code.responsivevoice.org/getvoice.php"
    
    # Parameters for the API
    params = {
        "t": text,  # Text to be converted
        "lang": "en",  # Language of the text (en for English)
        "src": text,  # Same text as 't' for the request
        "rate": "0.8",  # Speed of the speech (0.1 - 2.0)
        "vol": "1",  # Volume (0.0 - 1.0)
        "pitch": "1",  # Pitch (0.0 - 2.0)
        "encode": "mp3",  # Output audio format
    }

    # Send the request to the API
    response = requests.get(url, params=params)
    
    if response.status_code == 200:
        # Save the audio file
        with open("output.mp3", "wb") as audio_file:
            audio_file.write(response.content)
        print("Audio content has been saved to 'output.mp3'")
    else:
        print("Error:", response.status_code)

# Example usage
pdf_path = "yo.pdf"  # Path to your PDF file
text = extract_text_from_pdf(pdf_path)  # Extract text from the PDF
if text:
    text_to_speech(text)  # Convert the text to speech
else:
    print("No text found in the PDF.")
